# =============================================================================
# UBI Payment Service - Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values

# =============================================================================
# DATABASE
# =============================================================================
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/ubi_payments?schema=public"

# =============================================================================
# REDIS
# =============================================================================
REDIS_URL="redis://localhost:6379"

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================
NODE_ENV="development"
PORT=4003
LOG_LEVEL="debug"
APP_URL="http://localhost:4003"

# Service-to-service authentication
SERVICE_AUTH_SECRET="your-service-auth-secret-here"

# =============================================================================
# ENCRYPTION & SECURITY
# =============================================================================
# 32-byte hex string for AES-256 encryption of sensitive data
ENCRYPTION_KEY="your-32-byte-hex-encryption-key"

# JWT Secret for internal tokens
JWT_SECRET="your-jwt-secret-here"

# =============================================================================
# M-PESA (Kenya)
# =============================================================================
MPESA_CONSUMER_KEY=""
MPESA_CONSUMER_SECRET=""
MPESA_PASSKEY=""
MPESA_SHORTCODE=""
MPESA_ENVIRONMENT="sandbox"  # "sandbox" or "production"
MPESA_CALLBACK_URL="https://api.ubi.africa/webhooks/mpesa"

# M-Pesa B2C (Payouts)
MPESA_B2C_INITIATOR_NAME=""
MPESA_B2C_SECURITY_CREDENTIAL=""
MPESA_B2C_SHORTCODE=""
MPESA_B2C_QUEUE_TIMEOUT_URL=""
MPESA_B2C_RESULT_URL=""

# =============================================================================
# MTN MOMO (Ghana, Rwanda, Uganda)
# =============================================================================
# Ghana
MOMO_GHANA_SUBSCRIPTION_KEY=""
MOMO_GHANA_API_USER=""
MOMO_GHANA_API_KEY=""

# Rwanda
MOMO_RWANDA_SUBSCRIPTION_KEY=""
MOMO_RWANDA_API_USER=""
MOMO_RWANDA_API_KEY=""

# Uganda
MOMO_UGANDA_SUBSCRIPTION_KEY=""
MOMO_UGANDA_API_USER=""
MOMO_UGANDA_API_KEY=""

MOMO_ENVIRONMENT="sandbox"  # "sandbox" or "production"
MOMO_CALLBACK_URL="https://api.ubi.africa/webhooks/momo"

# =============================================================================
# PAYSTACK (Nigeria, Ghana, South Africa, Kenya)
# =============================================================================
PAYSTACK_SECRET_KEY=""
PAYSTACK_PUBLIC_KEY=""
PAYSTACK_WEBHOOK_SECRET=""
PAYSTACK_ENVIRONMENT="test"  # "test" or "live"

# =============================================================================
# FLUTTERWAVE (Backup Provider)
# =============================================================================
FLUTTERWAVE_SECRET_KEY=""
FLUTTERWAVE_PUBLIC_KEY=""
FLUTTERWAVE_ENCRYPTION_KEY=""
FLUTTERWAVE_WEBHOOK_SECRET=""
FLUTTERWAVE_ENVIRONMENT="sandbox"  # "sandbox" or "production"

# =============================================================================
# FRAUD DETECTION
# =============================================================================
# Maximum transactions per user per hour
FRAUD_MAX_TRANSACTIONS_PER_HOUR=20

# Maximum amount per transaction (in smallest currency unit)
FRAUD_MAX_TRANSACTION_AMOUNT=1000000  # 1M kobo = 10,000 NGN

# Velocity check window in minutes
FRAUD_VELOCITY_WINDOW_MINUTES=60

# =============================================================================
# RATE LIMITING
# =============================================================================
# API rate limits
RATE_LIMIT_WINDOW_MS=60000  # 1 minute
RATE_LIMIT_MAX_REQUESTS=100

# Payment-specific rate limits
PAYMENT_RATE_LIMIT_WINDOW_MS=60000
PAYMENT_RATE_LIMIT_MAX_REQUESTS=30

# Webhook rate limits
WEBHOOK_RATE_LIMIT_WINDOW_MS=60000
WEBHOOK_RATE_LIMIT_MAX_REQUESTS=200

# =============================================================================
# SETTLEMENT & PAYOUTS
# =============================================================================
# Default settlement delay in hours
SETTLEMENT_DELAY_HOURS=24

# Minimum payout amount (in smallest currency unit)
MIN_PAYOUT_AMOUNT=5000  # 50 NGN

# Maximum daily payout amount per driver
MAX_DAILY_PAYOUT=10000000  # 100,000 NGN

# =============================================================================
# NOTIFICATIONS
# =============================================================================
# Notification service URL (internal)
NOTIFICATION_SERVICE_URL="http://localhost:4006"

# =============================================================================
# OBSERVABILITY
# =============================================================================
# Sentry DSN for error tracking
SENTRY_DSN=""

# OpenTelemetry endpoint
OTEL_EXPORTER_OTLP_ENDPOINT=""

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Enable/disable features
FEATURE_CARD_PAYMENTS=true
FEATURE_MOBILE_MONEY=true
FEATURE_INSTANT_PAYOUTS=false
FEATURE_CROSS_BORDER=false
FEATURE_CRYPTO_PAYMENTS=false

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# User Service URL
USER_SERVICE_URL="http://localhost:4001"

# Ride Service URL
RIDE_SERVICE_URL="http://localhost:4002"

# Food Service URL
FOOD_SERVICE_URL="http://localhost:4004"

# Delivery Service URL
DELIVERY_SERVICE_URL="http://localhost:4005"

# =============================================================================
# B2B API
# =============================================================================
# Default API rate limits for B2B clients
B2B_DEFAULT_RATE_LIMIT_PER_SECOND=10
B2B_DEFAULT_RATE_LIMIT_PER_MINUTE=100
B2B_DEFAULT_RATE_LIMIT_PER_HOUR=1000

# =============================================================================
# DRIVER EXPERIENCE
# =============================================================================
# Fuel discount partner API
FUEL_PARTNER_API_URL=""
FUEL_PARTNER_API_KEY=""

# Health benefits partner API
HEALTH_BENEFITS_API_URL=""
HEALTH_BENEFITS_API_KEY=""
